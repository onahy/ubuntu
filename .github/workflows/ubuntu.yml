name: Ubuntu VDS

on: workflow_dispatch

jobs:
  vds:
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      max-parallel: 3
      matrix:
        instance: [1, 2, 3]
    name: VDS Instance ${{ matrix.instance }}
    
    steps:
    - name: Hızlı Kurulum
      run: |
        sudo apt-get update > /dev/null 2>&1
        sudo apt-get install -y tmate > /dev/null 2>&1
        
    - name: SSH Bağlantısı Oluştur
      run: |
        tmate -S /tmp/tmate.sock new-session -d
        tmate -S /tmp/tmate.sock wait tmate-ready
        echo "🖥️ VDS #${{ matrix.instance }}:"
        tmate -S /tmp/tmate.sock display -p '#{tmate_ssh}'
        
    - name: Çalışır Tut
      run: sleep 21600 # 6 saat 
