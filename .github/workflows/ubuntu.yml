name: Ubuntu VDS

on: workflow_dispatch

jobs:
  build:
    runs-on: ubuntu-latest
    timeout-minutes: 360  # 6 saat
    
    steps:
    - name: Setup SSH
      run: |
        sudo apt-get update
        sudo apt-get install -y openssh-server net-tools
        sudo service ssh start
        echo "SSH_PASSWORD=123456789" >> $GITHUB_ENV
        sudo useradd -m -s /bin/bash runner
        echo "runner:${{ env.SSH_PASSWORD }}" | sudo chpasswd
        
    - name: Get IP
      run: |
        echo "Public IP: $(curl -s ifconfig.me)"
        echo "SSH Bilgileri:"
        echo "Kullanıcı: runner"
        echo "Şifre: ${{ env.SSH_PASSWORD }}"
        echo "Port: 22"
        
    - name: Keep Alive
      run: |
        while true; do
          echo "System active..."
          sleep 300
        done 
